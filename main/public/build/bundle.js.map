{"version":3,"file":"bundle.js","sources":["../../src/js/traverseTree.js","../../src/js/keybasedTree.js","../../src/js/CreateDemoTree.js","../../src/main.js"],"sourcesContent":["/**\r\n * \r\n * @param {*} tree - tree to be trafersed\r\n * @param {*} currentNode - current node while recursing\r\n * @param {*} callbackEntering - callback function called before entering the current node\r\n * @param {*} callbackLeaving - callback function called after leaving the current node\r\n * @param {*} level - counts recursion level, may be used by callback functions\r\n */\r\nfunction recurseNode(tree, currentNode, callbackEntering, callbackLeaving, level) {\r\n    callbackEntering(level, currentNode);\r\n    if (currentNode.children) {\r\n        var num_of_children = currentNode.children.length;\r\n        level++;\r\n        for (var i = 0; i < num_of_children; i++) {\r\n            var childKey = currentNode.children[i];\r\n            var child = tree[childKey];\r\n            recurseNode(tree, child, callbackEntering, callbackLeaving, level);\r\n        }\r\n        level--;\r\n    }\r\n    callbackLeaving(level, currentNode);\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} tree -  keybased tree object\r\n * @param {*} callback - function callbackEntering(level, currentNode)\r\n * called when entering current node\r\n */\r\nexport function traverseRootToLeafs(tree, callback) {\r\n    var emptyFunc = function () {};\r\n    var currentNode = tree['root'];\r\n    recurseNode(tree, currentNode, callback, emptyFunc, 0);\r\n}","import {\r\n    traverseRootToLeafs\r\n} from './traverseTree.js';\r\n\r\n// variable tree has to be definde outside of createTree to have access to createNode\r\nvar tree = {\r\n    addNode: function (parentKey, newContent) {\r\n        if (parentKey) {\r\n            return createNode(this, parentKey, newContent);\r\n        } else {\r\n            console.error('parentKey undefined or null');\r\n            return null;\r\n        }\r\n    },\r\n    /**\r\n     * \r\n     * @param {function(level, currentNode)} callback - function applied to current node while traversing the tree\r\n     */\r\n    fromRootToLeaf: function (callback) {\r\n        traverseRootToLeafs(this, callback);\r\n    }\r\n};\r\n\r\n/**\r\n * creates a tree object with one node: the root node\r\n * @param {*} rootcontent - the content of the new root node\r\n * @returns tree object consisting of root node \r\n */\r\nexport function createTree(rootcontent) {\r\n    // newTree inherits methods of tree object \r\n    var newTree = Object.create(tree);\r\n    var rootNode = {\r\n        key: 'root',\r\n        parentKey: null,\r\n        children: [],\r\n        content: rootcontent,\r\n        isLeaf: function () {\r\n            return (this.children.length === 0);\r\n        }\r\n    }\r\n    newTree['root'] = rootNode;\r\n    return newTree;\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} tree - tree to which node will be added\r\n * @param {*} parentKey - key of parent of the new node\r\n * @param {*} newContent - content of the new node\r\n * @returns the new node or null, if parent key not found in tree\r\n */\r\nfunction createNode(tree, parentKey, newContent) {\r\n    // console.log('add node with content ' + newContent + ' to parent with key ' + parentKey);\r\n    var parent = tree[parentKey];\r\n    if (parent) {\r\n        var newKey = sureRandomKey(tree, 3);\r\n        var newNode = {\r\n            key: newKey,\r\n            content: newContent,\r\n            parentKey: parentKey,\r\n            isLeaf: function () {\r\n                return (this.children.length === 0);\r\n            }\r\n        };\r\n        tree[newKey] = newNode;\r\n        parent.children = [...(parent.children || []), newNode.key]\r\n        return newNode;\r\n    } else {\r\n        console.log('unknown parent key: ', parentKey);\r\n        return null;\r\n    }\r\n}\r\n// console.log(tree);\r\n\r\nfunction randomKey(length) {\r\n    var result = '';\r\n    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_';\r\n    // var characters = 'abc'; //for test\r\n    var numOfChars = characters.length;\r\n    for (var i = 0; i < length; i++) {\r\n        result += characters.charAt(Math.floor(Math.random() * numOfChars));\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction sureRandomKey(tree, length) {\r\n    const numOfTries = 10; \r\n    // const numOfTries = 5; // for test\r\n    var existingKeys = Object.keys(tree);\r\n    // console.log('existingKeys', existingKeys);\r\n    var newKey = null;\r\n    for (var i = 0; i < numOfTries; i++) {\r\n        var candidate = randomKey(length);\r\n        if (existingKeys.indexOf(candidate) === -1) {\r\n            // candidate is no existing key\r\n            newKey = candidate;\r\n            i = numOfTries; // short circuit\r\n        } else {\r\n            // no new key found; try again\r\n            console.log('try number', i, 'not successful:', candidate, 'exists');\r\n        }\r\n    }\r\n    if (newKey === null){\r\n        throw 'no new key found';\r\n    }\r\n    return newKey;\r\n}","/* eslint-disable no-unused-vars */\r\nimport {\r\n    createTree\r\n} from './keybasedTree.js';\r\n\r\n/**\r\n * create a tree for test purposes (e.g. traversing)\r\n * using addNode\r\n */\r\nexport function demoTree() {\r\n    var tree = createTree('Demo Tree');\r\n    var w = tree.addNode(\"root\", \"content-W\");\r\n    var y = tree.addNode(\"root\", \"content-Y\");\r\n    var a1 = tree.addNode(w.key, \"content-A\");\r\n    var s = tree.addNode(w.key, \"content-S\");\r\n    var e = tree.addNode(w.key, \"content-E\");\r\n    var t = tree.addNode(s.key, \"content-T\");\r\n    var a2 = tree.addNode(y.key, \"content-A\");\r\n    var c = tree.addNode(y.key, \"content-C\");\r\n    return tree;\r\n}","\"use strict\";\r\n// \r\n\r\nimport config from \"./js/config.json\";\r\nimport {createTree} from './js/keybasedTree.js';\r\nimport {demoTree} from './js/CreateDemoTree.js';\r\nimport {version} from '../package.json';\r\n\r\n// after import of bundle, using <script src='build/bundle.js'></script>,\r\n// the bridge object with the following exports is available, e.g. using <script> in HTML\r\nexport {\r\n    config,\r\n    createTree,\r\n    version,\r\n    demoTree\r\n};\r\n\r\nwindow.onload = function () {\r\n    console.log('version (from package.json) ', version);\r\n    // var newTree = demoTree();\r\n    // console.log(newTree);\r\n};\r\n\r\nexport function mainIsLoaded() {\r\n    return true;\r\n}"],"names":[],"mappings":";;;;;;;;;;;;IAAA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,SAAS,WAAW,CAAC,IAAI,EAAE,WAAW,EAAE,gBAAgB,EAAE,eAAe,EAAE,KAAK,EAAE;IAClF,IAAI,gBAAgB,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC;IACzC,IAAI,IAAI,WAAW,CAAC,QAAQ,EAAE;IAC9B,QAAQ,IAAI,eAAe,GAAG,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC;IAC1D,QAAQ,KAAK,EAAE,CAAC;IAChB,QAAQ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,eAAe,EAAE,CAAC,EAAE,EAAE;IAClD,YAAY,IAAI,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACnD,YAAY,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;IACvC,YAAY,WAAW,CAAC,IAAI,EAAE,KAAK,EAAE,gBAAgB,EAAE,eAAe,EAAE,KAAK,CAAC,CAAC;IAC/E,SAAS;IACT,QAAQ,KAAK,EAAE,CAAC;IAChB,KAAK;IACL,IAAI,eAAe,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC;IACxC,CAAC;AACD;IACA;IACA;IACA;IACA;IACA;IACA;IACO,SAAS,mBAAmB,CAAC,IAAI,EAAE,QAAQ,EAAE;IACpD,IAAI,IAAI,SAAS,GAAG,YAAY,EAAE,CAAC;IACnC,IAAI,IAAI,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;IACnC,IAAI,WAAW,CAAC,IAAI,EAAE,WAAW,EAAE,QAAQ,EAAE,SAAS,EAAE,CAAC,CAAC,CAAC;IAC3D;;IC7BA;IACA,IAAI,IAAI,GAAG;IACX,IAAI,OAAO,EAAE,UAAU,SAAS,EAAE,UAAU,EAAE;IAC9C,QAAQ,IAAI,SAAS,EAAE;IACvB,YAAY,OAAO,UAAU,CAAC,IAAI,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;IAC3D,SAAS,MAAM;IACf,YAAY,OAAO,CAAC,KAAK,CAAC,6BAA6B,CAAC,CAAC;IACzD,YAAY,OAAO,IAAI,CAAC;IACxB,SAAS;IACT,KAAK;IACL;IACA;IACA;IACA;IACA,IAAI,cAAc,EAAE,UAAU,QAAQ,EAAE;IACxC,QAAQ,mBAAmB,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;IAC5C,KAAK;IACL,CAAC,CAAC;AACF;IACA;IACA;IACA;IACA;IACA;IACO,SAAS,UAAU,CAAC,WAAW,EAAE;IACxC;IACA,IAAI,IAAI,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IACtC,IAAI,IAAI,QAAQ,GAAG;IACnB,QAAQ,GAAG,EAAE,MAAM;IACnB,QAAQ,SAAS,EAAE,IAAI;IACvB,QAAQ,QAAQ,EAAE,EAAE;IACpB,QAAQ,OAAO,EAAE,WAAW;IAC5B,QAAQ,MAAM,EAAE,YAAY;IAC5B,YAAY,QAAQ,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;IAChD,SAAS;IACT,MAAK;IACL,IAAI,OAAO,CAAC,MAAM,CAAC,GAAG,QAAQ,CAAC;IAC/B,IAAI,OAAO,OAAO,CAAC;IACnB,CAAC;AACD;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,SAAS,UAAU,CAAC,IAAI,EAAE,SAAS,EAAE,UAAU,EAAE;IACjD;IACA,IAAI,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC;IACjC,IAAI,IAAI,MAAM,EAAE;IAChB,QAAQ,IAAI,MAAM,GAAG,aAAa,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;IAC5C,QAAQ,IAAI,OAAO,GAAG;IACtB,YAAY,GAAG,EAAE,MAAM;IACvB,YAAY,OAAO,EAAE,UAAU;IAC/B,YAAY,SAAS,EAAE,SAAS;IAChC,YAAY,MAAM,EAAE,YAAY;IAChC,gBAAgB,QAAQ,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;IACpD,aAAa;IACb,SAAS,CAAC;IACV,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,OAAO,CAAC;IAC/B,QAAQ,MAAM,CAAC,QAAQ,GAAG,CAAC,IAAI,MAAM,CAAC,QAAQ,IAAI,EAAE,CAAC,EAAE,OAAO,CAAC,GAAG,EAAC;IACnE,QAAQ,OAAO,OAAO,CAAC;IACvB,KAAK,MAAM;IACX,QAAQ,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,SAAS,CAAC,CAAC;IACvD,QAAQ,OAAO,IAAI,CAAC;IACpB,KAAK;IACL,CAAC;IACD;AACA;IACA,SAAS,SAAS,CAAC,MAAM,EAAE;IAC3B,IAAI,IAAI,MAAM,GAAG,EAAE,CAAC;IACpB,IAAI,IAAI,UAAU,GAAG,kEAAkE,CAAC;IACxF;IACA,IAAI,IAAI,UAAU,GAAG,UAAU,CAAC,MAAM,CAAC;IACvC,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;IACrC,QAAQ,MAAM,IAAI,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,UAAU,CAAC,CAAC,CAAC;IAC5E,KAAK;IACL,IAAI,OAAO,MAAM,CAAC;IAClB,CAAC;AACD;IACA,SAAS,aAAa,CAAC,IAAI,EAAE,MAAM,EAAE;IACrC,IAAI,MAAM,UAAU,GAAG,EAAE,CAAC;IAC1B;IACA,IAAI,IAAI,YAAY,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACzC;IACA,IAAI,IAAI,MAAM,GAAG,IAAI,CAAC;IACtB,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,EAAE,CAAC,EAAE,EAAE;IACzC,QAAQ,IAAI,SAAS,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;IAC1C,QAAQ,IAAI,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE;IACpD;IACA,YAAY,MAAM,GAAG,SAAS,CAAC;IAC/B,YAAY,CAAC,GAAG,UAAU,CAAC;IAC3B,SAAS,MAAM;IACf;IACA,YAAY,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC,EAAE,iBAAiB,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;IACjF,SAAS;IACT,KAAK;IACL,IAAI,IAAI,MAAM,KAAK,IAAI,CAAC;IACxB,QAAQ,MAAM,kBAAkB,CAAC;IACjC,KAAK;IACL,IAAI,OAAO,MAAM,CAAC;IAClB;;IC1GA;AAIA;IACA;IACA;IACA;IACA;IACO,SAAS,QAAQ,GAAG;IAC3B,IAAI,IAAI,IAAI,GAAG,UAAU,CAAC,WAAW,CAAC,CAAC;IACvC,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;IAC9C,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;IAC9C,IAAa,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,WAAW,EAAE;IAC9C,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC;IAC7C,IAAY,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,WAAW,EAAE;IAC7C,IAAY,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,WAAW,EAAE;IAC7C,IAAa,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,WAAW,EAAE;IAC9C,IAAY,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,WAAW,EAAE;IAC7C,IAAI,OAAO,IAAI,CAAC;IAChB;;;;ICHA,MAAM,CAAC,MAAM,GAAG,YAAY;IAC5B,IAAI,OAAO,CAAC,GAAG,CAAC,8BAA8B,EAAE,OAAO,CAAC,CAAC;IACzD;IACA;IACA,CAAC,CAAC;AACF;IACO,SAAS,YAAY,GAAG;IAC/B,IAAI,OAAO,IAAI,CAAC;IAChB;;;;;;;;;;;;;;;;"}